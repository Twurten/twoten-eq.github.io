<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>cmd</title>
    <link rel="stylesheet" href="./styles.css" />
    <link rel="icon" href="../files/img/cmd.png" />
    <script src="./mail.js"></script>
  </head>
  <body>
    <div class="container" id="terminaldiv">
      <p class="p" id="firstout">welcome to the terminal <a>type 'help'</a></p>
      <div id="com"></div>
      <div class="input-box" id="inputbox">
        <a class="input-b" id="tmpid"></a
        ><input type="text" autofocus="true" id="input" class="input" />
      </div>
    </div>
    <svg
      id="dsvg"
      width="48"
      height="38"
      viewBox="0 0 48 38"
      fill="none"
      style="display: none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <path
        d="M40.6609 3.18365C37.513 1.67724 34.1829 0.606602 30.7585 0C30.3312 0.787934 29.8344 1.85079 29.4888 2.69272C25.8514 2.12571 22.151 2.12571 18.5136 2.69272C18.1321 1.77269 17.7035 0.873871 17.2296 0C13.8022 0.607602 10.4695 1.68076 7.31992 3.19101C1.05348 12.8769 -0.645729 22.3223 0.203876 31.6327C3.86187 34.4575 7.97176 36.6111 12.3503 37.9975C13.3341 36.6129 14.2043 35.1474 14.952 33.616C13.5299 33.0617 12.1589 32.3791 10.8551 31.5763C11.1983 31.3161 11.5343 31.0436 11.8583 30.7638C19.7568 34.5414 28.3368 34.5414 36.1417 30.7638C36.4705 31.0436 36.8065 31.3161 37.1449 31.5763C35.8465 32.3765 34.4713 33.0638 33.0409 33.6185C33.7873 35.1506 34.6575 36.6161 35.6425 38C40.0245 36.6145 44.1372 34.459 47.7962 31.6303C48.7922 20.8397 46.0945 11.4803 40.6609 3.18365ZM16.0272 25.9061C13.656 25.9061 11.7119 23.6429 11.7119 20.8864C11.7119 18.1298 13.6152 15.8618 16.0272 15.8618C18.4392 15.8618 20.3832 18.1249 20.3424 20.8864C20.3448 23.6429 18.4392 25.9061 16.0272 25.9061ZM31.9729 25.9061C29.6016 25.9061 27.6576 23.6429 27.6576 20.8864C27.6576 18.1298 29.5608 15.8618 31.9729 15.8618C34.3849 15.8618 36.3289 18.1249 36.2881 20.8864C36.2881 23.6429 34.3849 25.9061 31.9729 25.9061Z"
        fill="#474747"
      ></path>
    </svg>
    <script>
      function rnd(min, max) {}
      document.getElementById("tmpid").innerHTML = "<";
      let senderEmail = "";
      let senderMessage = "";
      let discordMessage = "";
      let prev = "";
      let terminated = false;

      let input = document.getElementById("input");
      input.addEventListener(
        "keypress",
        (event) => {
          let code = event.code;

          if (code == "Enter" && !terminated) {
            if (input.value != "") {
              let inputt = document.createElement("p");
              inputt.innerHTML = input.value;
              inputt.classList.add("pi");
              let div = document.getElementById("com");
              div.appendChild(inputt);

              prev = input.value;
              switchCommand();
            }
          }
        },
        false
      );

      input.addEventListener(
        "keydown",
        (event) => {
          let code = event.code;

          if (code == "ArrowUp") {
            input.value = prev;
          }
          if (code == "ArrowDown") {
            input.value = "";
          }
        },
        false
      );

      function switchCommand() {
        let lines = new Array();
        let inp = input.value.split(" ");
        let comm = inp[0];
        if (input.value == "this is a lie") {
          createOutput(
            "[WARN/THREAD/MAIN]:Thread.THREAD_OVERLOAD",
            new Array()
          );
          setTimeout(function () {
            createOutput("OVERLOAD: 34%", new Array());
            createOutput("error: thread/main doesnt respond", new Array());
          }, 1000);
          setTimeout(function () {
            createOutput("OVERLOAD: 69%", new Array());
            createOutput("error: thread/main:420", new Array());
          }, 2000);
          setTimeout(function () {
            createOutput("OVERLOAD: 99%", new Array());
            createOutput("terminating all threads", new Array());
          }, 3000);
          setTimeout(function () {
            createOutput("OVERLOAD: 99.1%", new Array());
            createOutput("terminating...", new Array());
          }, 4000);
          setTimeout(function () {
            createOutput("OVERLOAD: 99.9%", new Array());
          }, 5000);
          setTimeout(function () {
            terminate();
          }, 6000);
        }

        switch (comm) {
          case "?":
          case "help":
            lines.push("help / ? - shows the command list");
            lines.push("inf - about me");
            lines.push("soc - my contacts");
            lines.push("cd [page] - redirects you to another page");
            lines.push("msg [message] - message me");
            lines.push("eml [your email] [message] - email me");
            lines.push("rel - clears the terminal");
            lines.push("exit - shuts down the terminal");
            lines.push("UTIL COMMANDS:");
            lines.push("rnd [min] [max] - generate random int");
            createOutput("COMMAND LIST:", lines);
            break;
          case "soc":
            createOutput("contacts{", lines);
            let output = document.createElement("div");
            output.classList.add("soc");
            let div = document.getElementById("com");
            div.appendChild(output);
            let disc = document.createElement("button");
            output.appendChild(disc);
            disc.innerHTML = "discord";
            disc.classList.add("p");
            disc.classList.add("btn");
            disc.onclick = function () {
              navigator.clipboard.writeText("");//////////////////////////////////
              createOutput("copied", lines);
            };
            break;
          case "rnd":
            //createOutput(rnd(inp[1],inp[2]),lines);
            break;
          case "rel":
            createOutput("reloading...", lines);
            location.reload();
            break;
          case "bruh":
            let bruh = new Audio("./sounds/bruh.m4a");
            bruh.play();
            break;
          case "msg":
            for (let i = 1; i < inp.length; i++) discordMessage += inp[i] + " ";
            lines.push(discordMessage);
            createOutput("feature is disabled, message wasnt sent", lines);
            discordMessage = "";
            break;
          case "cd":
            if (inp[1] != null) {
              createOutput("redirecting...", lines);
              input.value = "";
              location.replace("https://twoten-eq.github.io/" + inp[1]);
            } else {
              createOutput("redirecting...", lines);
              input.value = "";
              location.replace("https://twoten-eq.github.io/");
            }
            break;
          case "eml":
            senderEmail = inp[1];
            senderMessage = "";
            for (let i = 2; i < inp.length; i++) {
              senderMessage += inp[i] + " ";
            }

            if (senderEmail != "" && senderMessage != "") {
              lines.push("email: " + senderEmail);
              lines.push("message: " + senderMessage);
              createOutput("if the data below is correct, type 'send'", lines);
            } else {
              lines.push("the arguments cannot be empty");
              createOutput("error", lines);
            }
            break;
          case "inf":
            createOutput("ABOUT ME", lines);
            break;
          case "send":
            if (senderEmail != "" && senderMessage != "") {
              createOutput("feature is disabled", lines);
            } else {
              createOutput("run the 'eml' command first", lines);
            }
            break;
          case "exit":
            terminate();
            break;
          default:
            if (comm == "command") {
              lines.push(input.value + " is not a command");
              lines.push("wait it is");
            } else lines.push("'" + input.value + "' is not a command");
            createOutput("error", lines);
            break;
        }

        input.value = "";
        document.getElementById("terminaldiv").scrollTop =
          document.getElementById("terminaldiv").scrollHeight;
      }
      function terminate() {
        createOutput("TERMINATED", new Array());
        terminated = true;
      }
      function createOutput(content, additional) {
        let output = document.createElement("p");
        output.innerHTML = content;
        output.classList.add("p");
        let div = document.getElementById("com");
        div.appendChild(output);

        for (let i = 0; i < additional.length; i++) {
          let outputPlus = document.createElement("a");
          outputPlus.innerHTML = additional[i];
          output.appendChild(outputPlus);
        }
      }

      function copy(str) {
        navigator.clipboard.writeText(str);
        createOutput("copied", new Array());
      }
    </script>
  </body>
</html>
